# (MODX)EvolutionCMS.snippets.ddGetDate

Сниппет выводит дату по заданному формату. Также он умеет:
* Возвращать текущую дату.
* Автоматически возвращать дату публикации, а если её нет, то дату создания документа.
* Отображать месяцы строкой (`января`, `февраля`, `марта` и т.д.).
* Выводить дату в коротком формате относительно текущей даты (`Сегодня`, `Вчера`, `Позавчера`).


## Использует

* PHP >= 5.6
* [(MODX)EvolutionCMS](https://github.com/evolution-cms/evolution) >= 1.1
* [(MODX)EvolutionCMS.libraries.ddTools](https://code.divandesign.biz/modx/ddtools) >= 0.48


## Документация


### Установка


#### 1. Элементы → Сниппеты: Создайте новый сниппет со следующими параметрами

1. Название сниппета: `ddGetDate`.
2. Описание: `<b>2.2</b> Сниппет выводит дату по заданному формату.`.
3. Категория: `Core`.
4. Анализировать DocBlock: `no`.
5. Код сниппета (php): Вставьте содержимое файла `ddGetDate_snippet.php` из архива.


#### 2. Элементы → Управление файлами

1. Создайте новую папку `assets/snippets/ddGetDate/`.
2. Извлеките содержимое архива в неё (кроме файла `ddGetDate_snippet.php`).


### Описание параметров

* `date`
	* Описание: Дата.
	* Допустимые значения:
		* `integer`
		* `string`
		* `'now'` — текущая дата
	* Значение по умолчанию: Дата публикации, если её нет — дата создания документа.
	
* `format`
	* Описание: Формат, по которому выводить дату.
	* Допустимые значения: `string`
	* Значение по умолчанию: `'d.m.y'`
	
* `monthToStr`
	* Описание: Отображать ли месяц строкой (января, февраля, марта и т.д.), в этом случае месяц в строке `format` должен быть задан как `'month'`.
	* Допустимые значения:
		* `0`
		* `1`
	* Значение по умолчанию: `0`
	
* `shortFormat`
	* Описание: Если задан короткий формат, то выводит дату относительно текущей, в этом случае дата в строке `shotFormat` должна быть задана как `'short'`.
	* Допустимые значения: `string`
	* Значение по умолчанию: —
	
* `lang`
	* Описание: Язык названий месяцев.
	* Допустимые значения:
		* `'ru'`
		* `'en'`
	* Значение по умолчанию: `'ru'`


### Примеры


#### Получение текущего года

```
[[ddGetDate?
	&date=`now`
	&format=`Y`
]]
```

Вернёт:

```
2021
```


#### Получение даты публикации текущего документа, а если её нет, то даты создания

```
[[ddGetDate]]
```

Вернёт:

```
27.03.21
```


#### Получение даты из TV с выводом месяца в строку

```
[[ddGetDate?
	&date=`[*tvDate*]`
	&format=`d month Y`
	&monthToStr=`1`
	&lang=`en`
]]
```

Вернёт:

```
27 марта 2021
```


#### Вывод даты в коротком формате относительно текущей даты (предположим, что сегодня 28.03.2021)

```
[[ddGetDate?
	&shortFormat=`short, G:i`
]]
```

Вернёт:

```
Вчера, 9:48.
```


#### Запустить сниппет без DB и eval через `\DDTools\Snippet::runSnippet`

```php
\DDTools\Snippet::runSnippet([
	'name' => 'ddGetDate',
	'params' => [
		'date' => 'now',
		'format' => 'd.m.Y'
	]
]);
```


## Ссылки

* [Home page](https://code.divandesign.biz/modx/ddgetdate)
* [Telegram chat](https://t.me/dd_code)
* [Packagist](https://packagist.org/packages/dd/evolutioncms-snippets-ddgetdate)


<link rel="stylesheet" type="text/css" href="https://DivanDesign.ru/assets/files/ddMarkdown.css" />